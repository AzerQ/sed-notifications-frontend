# Двухуровневая система уведомлений

Система уведомлений теперь имеет двухуровневую архитектуру:

## 1. Компактное боковое меню (Первый уровень)

### Функциональность:
- **Триггер**: Клик по иконке колокольчика в шапке сайта
- **Содержимое**: Только непрочитанные уведомления в компактном формате
- **Расположение**: Боковая панель справа от экрана
- **Формат уведомлений**: Облегченные карточки с минимальной информацией

### Компоненты компактного уведомления:
- **Иконка типа**: Визуальный индикатор типа уведомления
- **Заголовок**: Краткое название уведомления
- **Описание**: Сокращенное содержание (до 2 строк)
- **Время**: Относительное время получения
- **Индикатор ссылки**: Стрелка "→" для уведомлений со ссылками
- **Индикатор непрочитанного**: Синяя точка

### Действия:
- **Клик по уведомлению**: 
  - Открывает ссылку (если есть `cardUrl`)
  - Автоматически помечает уведомление как прочитанное
  - Удаляет уведомление из бокового меню
- **"Отметить все как прочитанные"**: Помечает все непрочитанные уведомления
- **Закрытие**: ESC, клик по фону или кнопка X

## 2. Полная история уведомлений (Второй уровень)

### Функциональность:
- **Триггер**: Кнопка "Вся история уведомлений" в боковом меню
- **Содержимое**: Все уведомления с полным функционалом
- **Расположение**: Модальное окно по центру экрана
- **Формат**: Полные карточки уведомлений

### Возможности:
- Фильтрация по типу, подтипу, статусу, автору
- Сортировка по дате, заголовку, автору, типу
- Поиск по заголовку и описанию
- Сохранение и применение пресетов фильтров
- Toast-уведомления для действий
- Звездочки (избранное)
- Полные действия с уведомлениями

## Технические детали

### Новые компоненты:

#### `NotificationBell.tsx`
```tsx
interface NotificationBellProps {
  unreadCount: number;
  onClick: () => void;
}
```

#### `NotificationSidebar.tsx`
```tsx
interface NotificationSidebarProps {
  isOpen: boolean;
  onClose: () => void;
  notifications: InAppNotificationData[];
  onNotificationRead: (id: number) => void;
  onOpenFullHistory: () => void;
}
```

#### `CompactNotification.tsx`
```tsx
interface CompactNotificationProps {
  notification: InAppNotificationData;
  onRead: (id: number) => void;
}
```

#### `Modal.tsx`
```tsx
interface ModalProps {
  isOpen: boolean;
  onClose: () => void;
  children: React.ReactNode;
  title?: string;
  size?: 'sm' | 'md' | 'lg' | 'xl' | 'full';
}
```

### Обновленные компоненты:

#### `NotificationCenter.tsx`
- Управляет состоянием уведомлений
- Синхронизирует изменения между боковым меню и модальным окном
- Предоставляет callback для обновления родительского компонента

#### `NotificationsBar.tsx`
- Добавлен проп `onNotificationsChange` для синхронизации состояния
- Оптимизирована сетка для модального окна (1-3 колонки)

### Интеграция в приложение:

```tsx
const App: React.FC = () => {
  const [notifications, setNotifications] = useState(mockNotifications);

  return (
    <NotificationCenter 
      notifications={notifications} 
      onNotificationUpdate={setNotifications}
    />
  );
};
```

## Пользовательский опыт

### Сценарий использования:
1. Пользователь видит красный счетчик на иконке колокольчика
2. Кликает по колокольчику - открывается боковое меню
3. Видит список новых уведомлений в компактном формате
4. Кликает по уведомлению:
   - Переходит по ссылке (если есть)
   - Уведомление помечается как прочитанное
   - Исчезает из бокового меню
   - Счетчик обновляется
5. Для просмотра всех уведомлений кликает "Вся история"
6. Открывается модальное окно с полным функционалом

### Адаптивность:
- Боковое меню: фиксированная ширина 320px на всех экранах
- Модальное окно: адаптивное, максимальная ширина согласно размеру экрана
- Компактные уведомления: одноколоночный макет для оптимальной читаемости

### Анимации:
- Плавное появление бокового меню (transform + transition)
- Fade-in модального окна
- Hover-эффекты для интерактивных элементов